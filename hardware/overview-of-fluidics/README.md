# Overview of Fluidics

## Description

In this note, we describe the implementation of an additional board, separate from the main Motherboard, that we developed for fluidic control of each culture vessel. This design enables individual control over the liquid handling, just as Smart Sleeves enable individual control over other culture parameters. However, consolidating these components into a dedicated board facilitates changing between different modes of liquid handling. Automated cell culture relies on programmable input/output of culture media. Fast and accurate, peristaltic pumps are typically used for this application26. For a single media input, a culture vessel requires two peristaltic pumps, one for influx and one for efflux. The influx line routes the media from the source into the culture, and the efflux line takes out waste media to maintain a fixed volume. Timing and coordination of these pumps is important for any automated cell culture application. A single input/single output system is the most basic type of fluidic control, and yet applying this scheme to a large number of independently-controlled culture vessels can prove challenging. To address this, and in anticipation of wanting to access even more complex fluidic functions, we developed a dedicated Auxiliary Board, separate from the Motherboard. The auxiliary board can simultaneously and independently control up to 48 fluidic control elements and supports much-needed abstraction of fluidic routines. The auxiliary board facilitates simple input/output functions at scale and accommodates more sophisticated fluidic solutions (see Supplementary Note 6). The auxiliary board is designed to receive serial inputs from the Raspberry Pi, translate abstract commands into simple sequential tasks, and simultaneously control up to 48 fluidic elements (Supplementary Fig. 9). The board contains many of the same components from the Motherboard (e.g. RS485, Arduinos, PWM) and serially communicates in the same manner. A typical 16-vial single media experiment, requiring the use of 32 control elements, consisting of two pumps per vial: one for influx and one for efflux. In this study, we applied this common hardware architecture (Supplementary Fig. 9a) to enable two modes of fluidic control in eVOLVER: (1) a “basic fluidic scheme”, wherein pairs of peristaltic pumps control the influx and efflux of media in each vial (Supplementary Fig. 9b); (2) a “complex fluidic scheme”, wherein customizable integrated millifluidic devices with pneumatic valves are used to route fluid in a programmable manner to execute complex fluidic tasks (Supplementary Fig. 9c, see Supplementary Note 6). In the basic eVOLVER setup featured in Figs. 3-4, we constructed arrays of 12V peristaltic dosing pumps (Adafruit, Product ID: 1150), which are easily implemented and are a good compromise between speed, accuracy, and cost. With peristaltic pumps and the eVOLVER hardware framework, fluid flow rates can be controlled in two ways. First, controlling the duration of pump events permits metering out defined volumes according to calibration curves (Supplementary Fig. 10). Second, flow rate can be controlled using the PWM board to apply different current profiles in order to run the peristaltic pumps at different power levels. This is particularly useful when seeking lower flow rates, as minimum pump duration (\~0.5 seconds) is constrained by the rate of communication between boards, so reducing power level can increase precision at small dose sizes. A small degree of scalability is possible with the basic fluidic scheme of using the auxiliary board to control individual peristaltic pumps for each fluidic line. For example, running 16 vials in a typical two-input experiment (such as morbidostat-like experiments23,26) would utilize all 48 channels of the auxiliary board, with three pumps per vial: two for influx and one for efflux. To permit further scaling of fluidic tasks without significantly increasing the number of pumps necessary, we developed a different paradigm of millifluidic handling for automated cell culture Nature Biotechnology: doi:10.1038/nbt.4151 20 (complex fluidic scheme), which utilizes fabricated pneumatically-valved integrated devices (see Supplementary Note 6).

![Modular fluidic control system for the eVOLVER platform. (a) Hardware for fluidic control. The Auxiliary Board enables one Arduino to independently and simultaneously control 48 fluidic elements (e.g. pumps and valves) via three PWM boards. (b) Schematic of system design for basic fluidic control. Serial commands from the Raspberry Pi are sent to the Motherboard and Auxiliary board on the same RS485 communication line. The Auxiliary board interprets the appropriate serial commands and actuates specific pumps for fluids to be metered in and out of a target smart sleeve. (c) Interchangeable fluidic systems in the eVOLVER platform. Using the same serial communication and electronic hardware, the peristaltic pump array can be interchanged with other fluidic control elements, in this case, banks of solenoid valves used to control fluid routing in integrated millifluidic devices (see Supplementary Note 6).](<../../.gitbook/assets/image (9) (1).png>)

![Arrayed peristaltic pumps for eVOLVER basic fluidic control. (a) Photograph and calibration curve of a 16-unit peristaltic pump array. Each pump is wired (12V & GND) to the corresponding slot on the two 16-pin breakout boards. A ribbon cable connects the pump array to the Auxiliary board. For a single input turbidostat unit, two such arrays are used, one for influx and one for efflux. A linear calibration curve was created for each pump, taken from three technical replicates at four different pump durations. (b) Flow rate measurements before and after an experiment demonstrates robustness of peristaltic pumps. During the experiment, each pump had a cumulative ON time of over 3,000 seconds (\~3L of media).](<../../.gitbook/assets/image (16) (1).png>)

